<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNStheApp Daily Quiz Generator (with Archive)</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDocs, collection, deleteDoc, onSnapshot, query, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        window.FB = { initializeApp, getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken, getFirestore, doc, setDoc, getDocs, collection, deleteDoc, onSnapshot, query, serverTimestamp };
    </script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Rajdhani:wght@600;700&family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        body { background-color: #050505; color: white; margin: 0; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #0a0a0a; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #555; }
        input, textarea, select { transition: all 0.2s; }
        .history-card:hover .delete-btn { opacity: 1; }
        /* 履歴の正解エリアに光る演出 */
        .ans-highlight { text-shadow: 0 0 10px rgba(248, 113, 113, 0.4); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- アイコンコンポーネント (エラー回避のためReact.Fragmentを明示) ---
        const Icon = ({ path, className, size = 24 }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {path}
            </svg>
        );

        const Icons = {
            RefreshCw: (p) => (
                <Icon {...p} path={
                    <React.Fragment>
                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                        <path d="M21 3v5h-5"/>
                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                        <path d="M8 16H3v5"/>
                    </React.Fragment>
                } />
            ),
            Palette: (p) => (
                <Icon {...p} path={
                    <React.Fragment>
                        <circle cx="13.5" cy="6.5" r=".5" fill="currentColor"/>
                        <circle cx="17.5" cy="10.5" r=".5" fill="currentColor"/>
                        <circle cx="8.5" cy="7.5" r=".5" fill="currentColor"/>
                        <circle cx="6.5" cy="12.5" r=".5" fill="currentColor"/>
                        <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.093 0-.679.522-1.218 1.218-1.218 1.482 0 2.688-1.205 2.688-2.688C16.68 5.626 14.58 2 12 2z"/>
                    </React.Fragment>
                } />
            ),
            Type: (p) => (
                <Icon {...p} path={
                    <React.Fragment>
                        <polyline points="4 7 4 4 20 4 20 7"/>
                        <line x1="9" x2="15" y1="20" y2="20"/>
                        <line x1="12" x2="12" y1="4" y2="20"/>
                    </React.Fragment>
                } />
            ),
            CheckCircle2: (p) => (
                <Icon {...p} path={
                    <React.Fragment>
                        <circle cx="12" cy="12" r="10"/>
                        <path d="m9 12 2 2 4-4"/>
                    </React.Fragment>
                } />
            ),
            Hash: (p) => (
                <Icon {...p} path={
                    <React.Fragment>
                        <line x1="4" x2="20" y1="9" y2="9"/>
                        <line x1="4" x2="20" y1="15" y2="15"/>
                        <line x1="10" x2="8" y1="3" y2="21"/>
                        <line x1="16" x2="14" y1="3" y2="21"/>
                    </React.Fragment>
                } />
            ),
            ImageIcon: (p) => (
                <Icon {...p} path={
                    <React.Fragment>
                        <rect width="18" height="18" x="3" y="3" rx="2" ry="2"/>
                        <circle cx="9" cy="9" r="2"/>
                        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
                    </React.Fragment>
                } />
            ),
            X: (p) => (
                <Icon {...p} path={
                    <React.Fragment>
                        <path d="M18 6 6 18"/>
                        <path d="m6 6 12 12"/>
                    </React.Fragment>
                } />
            ),
            HelpCircle: (p) => (
                <Icon {...p} path={
                    <React.Fragment>
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                        <line x1="12" x2="12.01" y1="17" y2="17"/>
                    </React.Fragment>
                } />
            ),
            Save: (p) => (
                <Icon {...p} path={
                    <React.Fragment>
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                        <polyline points="17 21 17 13 7 13 7 21"/>
                        <polyline points="7 3 7 8 15 8"/>
                    </React.Fragment>
                } />
            ),
            History: (p) => (
                <Icon {...p} path={
                    <React.Fragment>
                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                        <path d="M3 3v5h5"/>
                        <polyline points="12 7 12 12 16 14"/>
                    </React.Fragment>
                } />
            ),
            Trash2: (p) => (
                <Icon {...p} path={
                    <React.Fragment>
                        <polyline points="3 6 5 6 21 6"/>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/>
                        <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                        <line x1="10" y1="11" x2="10" y2="17"/>
                        <line x1="14" x2="14" y1="11" y2="17"/>
                    </React.Fragment>
                } />
            ),
        };

        const App = () => {
            const firebaseConfig = JSON.parse(__firebase_config);
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'daily-quiz-gen';
            
            const [db, setDb] = useState(null);
            const [user, setUser] = useState(null);
            const [history, setHistory] = useState([]);

            const themes = {
                blue:   { label: 'ANIME & GAME', main: '#3b82f6', glow: '#60a5fa', bg: '#172554' },
                red:    { label: 'SPORTS',       main: '#ef4444', glow: '#f87171', bg: '#450a0a' },
                green:  { label: 'ENTERTAINMENT',main: '#22c55e', glow: '#4ade80', bg: '#052e16' },
                yellow: { label: 'LIFESTYLE',    main: '#eab308', glow: '#facc15', bg: '#422006' },
                orange: { label: 'SOCIAL',       main: '#f97316', glow: '#fb923c', bg: '#431407' },
                indigo: { label: 'LITERATURE',   main: '#6366f1', glow: '#818cf8', bg: '#1e1b4b' },
                purple: { label: 'SCIENCE',      main: '#a855f7', glow: '#c084fc', bg: '#3b0764' },
                white:  { label: 'NON GENRE',    main: '#94a3b8', glow: '#ffffff', bg: '#0f172a' },
            };

            const [data, setData] = useState({
                date: new Date().toLocaleDateString('ja-JP', { year: 'numeric', month: '2-digit', day: '2-digit' }),
                vol: '1',
                label: 'ANIME & GAME',
                question: 'ここに問題文を入力してください。',
                answer: '正解',
                difficulty: 'NORMAL',
                themeColor: 'blue',
                questionFontSize: 50,
                answerFontSize: 80,
            });

            const [uiState, setUiState] = useState({
                isRecMode: false,
                zoom: 0.6,
                copied: false,
                viewType: 'question', 
                isSaving: false,
            });

            // Firebase初期化
            useEffect(() => {
                const initFirebase = async () => {
                    try {
                        const app = window.FB.initializeApp(firebaseConfig);
                        const auth = window.FB.getAuth(app);
                        const firestore = window.FB.getFirestore(app);
                        setDb(firestore);

                        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                            await window.FB.signInWithCustomToken(auth, __initial_auth_token);
                        } else {
                            await window.FB.signInAnonymously(auth);
                        }
                        window.FB.onAuthStateChanged(auth, (u) => setUser(u));
                    } catch (e) {
                        console.error("Firebase Auth Error", e);
                    }
                };
                initFirebase();
            }, []);

            // 履歴取得
            useEffect(() => {
                if (!db || !user) return;
                const q = window.FB.collection(db, 'artifacts', appId, 'users', user.uid, 'quizzes');
                const unsubscribe = window.FB.onSnapshot(q, (snapshot) => {
                    const items = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    items.sort((a, b) => (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0));
                    setHistory(items);
                }, (error) => console.error("Firestore error:", error));
                return () => unsubscribe();
            }, [db, user]);

            const handleChange = (key, value) => {
                setData(prev => ({ ...prev, [key]: value }));
            };

            const handleColorChange = (colorKey) => {
                setData(prev => ({
                    ...prev,
                    themeColor: colorKey,
                    label: themes[colorKey].label
                }));
            };

            const handleSave = async () => {
                if (!db || !user) return;
                setUiState(prev => ({ ...prev, isSaving: true }));
                const docId = `vol-${data.vol}-${Date.now()}`;
                try {
                    await window.FB.setDoc(window.FB.doc(db, 'artifacts', appId, 'users', user.uid, 'quizzes', docId), {
                        ...data,
                        createdAt: window.FB.serverTimestamp()
                    });
                    setTimeout(() => setUiState(prev => ({ ...prev, isSaving: false, viewType: 'history' })), 500);
                } catch (err) {
                    console.error("Save error:", err);
                    setUiState(prev => ({ ...prev, isSaving: false }));
                }
            };

            const handleDelete = async (id, e) => {
                e.stopPropagation();
                if (!db || !user) return;
                await window.FB.deleteDoc(window.FB.doc(db, 'artifacts', appId, 'users', user.uid, 'quizzes', id));
            };

            const handleLoad = (item) => {
                setData({
                    date: item.date,
                    vol: item.vol,
                    label: item.label,
                    question: item.question,
                    answer: item.answer,
                    difficulty: item.difficulty,
                    themeColor: item.themeColor,
                    questionFontSize: item.questionFontSize || 50,
                    answerFontSize: item.answerFontSize || 80,
                });
                setUiState(prev => ({ ...prev, viewType: 'question' }));
            };

            const handleCopyText = () => {
                const postText = `【今日の1問】Vol.${data.vol} [${data.date}]\nジャンル: ${themes[data.themeColor].label}\n難易度: ${data.difficulty}\n\nQ. ${data.question}\n\n⇩ 正解は画像またはリプライへ...\n#SNStheApp #競技クイズ #今日の1問`;
                const textArea = document.createElement("textarea");
                textArea.value = postText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                setUiState(prev => ({ ...prev, copied: true }));
                setTimeout(() => setUiState(prev => ({ ...prev, copied: false })), 2000);
                document.body.removeChild(textArea);
            };

            const currentTheme = themes[data.themeColor];

            const QuizCard = () => {
                const isAnswer = uiState.viewType === 'answer';
                return (
                    <div className="relative w-[1200px] h-[675px] bg-[#020617] overflow-hidden shadow-2xl text-white font-sans flex flex-col transition-all duration-500" style={{ '--main': currentTheme.main, '--glow': currentTheme.glow }}>
                        <div className={`absolute inset-0 bg-gradient-to-br from-black via-[#050505] to-[var(--main)] ${isAnswer ? 'opacity-30' : 'opacity-20'}`}></div>
                        <div className="absolute inset-0 opacity-10" style={{ backgroundImage: `linear-gradient(var(--main) 1px, transparent 1px), linear-gradient(90deg, var(--main) 1px, transparent 1px)`, backgroundSize: '40px 40px' }}></div>
                        <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_0%,#000_100%)] opacity-80"></div>
                        <div className="relative z-10 h-24 flex justify-between items-center px-12 pt-8">
                            <div className="flex items-center gap-4">
                                <div className={`${isAnswer ? 'bg-white' : 'bg-[var(--main)]'} text-black text-xl font-black px-6 py-1 skew-x-[-12deg] font-[Orbitron] shadow-[0_0_15px_var(--main)] transition-colors`}>
                                    <span className="skew-x-[12deg] block tracking-wider uppercase">{isAnswer ? 'SOLUTION' : data.label}</span>
                                </div>
                                <div className="h-[2px] w-20 bg-[var(--main)]"></div>
                                <span className="text-xl font-bold font-[Rajdhani] text-[var(--glow)] tracking-[0.2em] opacity-80">SNStheApp</span>
                            </div>
                            <div className="flex flex-col items-end">
                                <span className="text-4xl font-black font-[Orbitron] text-white tracking-widest drop-shadow-md"><span className="text-2xl text-[var(--main)] mr-2">Vol.</span>{data.vol}</span>
                                <span className="text-sm font-mono text-gray-400 tracking-widest mt-1">{data.date}</span>
                            </div>
                        </div>
                        <div className="relative z-10 flex-1 flex items-center justify-center px-24">
                            <div className="absolute inset-16 border border-[var(--main)] opacity-30 rounded-lg pointer-events-none"></div>
                            <div className="absolute inset-16 border-t-[4px] border-l-[4px] border-[var(--main)] w-8 h-8 rounded-tl-lg pointer-events-none"></div>
                            <div className="absolute inset-16 top-auto left-auto bottom-0 right-0 border-b-[4px] border-r-[4px] border-[var(--main)] w-8 h-8 rounded-br-lg pointer-events-none"></div>
                            <div className={`w-full ${isAnswer ? 'text-center' : 'text-left'}`}>
                                {isAnswer ? (
                                    <div className="flex flex-col items-center">
                                        <span className="text-2xl font-black font-[Orbitron] text-[var(--main)] tracking-[0.5em] mb-4">ANSWER IS...</span>
                                        <div className="flex items-center gap-8">
                                            <span className="text-7xl font-black text-white italic font-[Orbitron] opacity-50">A.</span>
                                            <p className="font-black tracking-tight text-white drop-shadow-[0_0_20px_var(--main)]" style={{ fontSize: `${data.answerFontSize}px`, textShadow: '0 4px 20px rgba(0,0,0,0.8)' }}>{data.answer}</p>
                                        </div>
                                    </div>
                                ) : (
                                    <p className="font-bold leading-relaxed tracking-wide text-white drop-shadow-md whitespace-pre-wrap font-sans" style={{ fontSize: `${data.questionFontSize}px`, textShadow: '0 4px 10px rgba(0,0,0,0.8)' }}>{data.question}</p>
                                )}
                            </div>
                        </div>
                        <div className="relative z-10 h-24 flex justify-between items-end px-12 pb-8">
                            <div className="flex items-center gap-6">
                                <div className="flex flex-col">
                                    <span className="text-[10px] text-gray-500 uppercase font-bold tracking-widest mb-1">DIFFICULTY</span>
                                    <div className="flex items-center gap-2">
                                        <div className={`w-3 h-3 rounded-full ${data.difficulty === 'EASY' ? 'bg-green-500' : 'bg-gray-800'}`}></div>
                                        <div className={`w-3 h-3 rounded-full ${data.difficulty === 'NORMAL' ? 'bg-blue-500' : 'bg-gray-800'}`}></div>
                                        <div className={`w-3 h-3 rounded-full ${data.difficulty === 'HARD' ? 'bg-red-500' : 'bg-gray-800'}`}></div>
                                        <span className="text-xl font-bold font-[Orbitron] text-white ml-2">{data.difficulty}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            return (
                <div className={`min-h-screen bg-[#050505] text-white flex p-4 gap-6 font-sans transition-all ${uiState.isRecMode ? 'justify-center items-center p-0' : 'flex-col lg:flex-row'}`}>
                    
                    {!uiState.isRecMode && (
                        <div className="w-full lg:w-[400px] bg-[#111] border-r-2 border-cyan-900/30 flex flex-col h-fit lg:h-[calc(100vh-2rem)] sticky top-4 rounded-xl overflow-hidden shadow-2xl">
                            <div className="p-5 bg-[#0a0a0a] border-b border-gray-800 flex justify-between items-center">
                                <div>
                                    <h1 className="text-xl font-black italic tracking-tighter font-[Orbitron] text-cyan-400 flex items-center gap-2">
                                        <Icons.RefreshCw className="w-5 h-5" /> DAILY GEN
                                    </h1>
                                    <p className="text-[10px] text-gray-500 font-mono tracking-widest mt-1 uppercase">Cloud Archive Module v2.1</p>
                                </div>
                                <button 
                                    onClick={handleSave} 
                                    disabled={uiState.isSaving}
                                    className="p-3 bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-700 text-white rounded-lg shadow-lg flex items-center gap-2 transition-all active:scale-95"
                                >
                                    <Icons.Save size={18} className={uiState.isSaving ? "animate-pulse" : ""} />
                                    <span className="text-xs font-bold font-[Orbitron]">SAVE</span>
                                </button>
                            </div>

                            <div className="p-5 space-y-6 overflow-y-auto flex-1 custom-scrollbar">
                                <div className="flex bg-gray-900 p-1 rounded-lg border border-gray-800">
                                    <button onClick={() => setUiState(prev => ({...prev, viewType: 'question'}))} className={`flex-1 flex items-center justify-center gap-2 py-2 text-[10px] font-bold rounded-md transition-all ${uiState.viewType === 'question' ? 'bg-cyan-600 text-white' : 'text-gray-500'}`}><Icons.HelpCircle size={14}/> EDITOR</button>
                                    <button onClick={() => setUiState(prev => ({...prev, viewType: 'answer'}))} className={`flex-1 flex items-center justify-center gap-2 py-2 text-[10px] font-bold rounded-md transition-all ${uiState.viewType === 'answer' ? 'bg-red-600 text-white' : 'text-gray-500'}`}><Icons.CheckCircle2 size={14}/> PREVIEW_ANS</button>
                                    <button onClick={() => setUiState(prev => ({...prev, viewType: 'history'}))} className={`flex-1 flex items-center justify-center gap-2 py-2 text-[10px] font-bold rounded-md transition-all ${uiState.viewType === 'history' ? 'bg-purple-600 text-white' : 'text-gray-500'}`}><Icons.History size={14}/> HISTORY</button>
                                </div>

                                {uiState.viewType === 'history' ? (
                                    <div className="space-y-3">
                                        <p className="text-[10px] text-gray-500 font-mono tracking-widest uppercase mb-4 font-bold">Saved Archive ({history.length})</p>
                                        {history.length === 0 ? (
                                            <div className="text-center py-10 text-gray-600 italic text-sm">履歴はありません</div>
                                        ) : history.map(item => (
                                            <div 
                                                key={item.id} 
                                                onClick={() => handleLoad(item)}
                                                className="history-card bg-gray-900/40 border border-gray-800 p-4 rounded-lg hover:border-cyan-500/50 cursor-pointer transition-all relative group overflow-hidden"
                                            >
                                                {/* Header in History Card */}
                                                <div className="flex justify-between items-start mb-2">
                                                    <span className="text-[9px] font-mono text-cyan-500 tracking-wider">Vol.{item.vol} // {item.date}</span>
                                                    <button onClick={(e) => handleDelete(item.id, e)} className="delete-btn opacity-0 group-hover:opacity-100 p-1 text-gray-600 hover:text-red-500 transition-opacity">
                                                        <Icons.Trash2 size={14}/>
                                                    </button>
                                                </div>

                                                {/* Question Preview */}
                                                <p className="text-xs text-gray-300 line-clamp-2 leading-relaxed mb-3">{item.question}</p>

                                                {/* Footer in History Card: Answer Display */}
                                                <div className="flex items-center justify-between border-t border-gray-800/60 pt-3">
                                                    <span className="text-[8px] bg-gray-800 text-gray-400 px-2 py-0.5 rounded uppercase font-[Orbitron] tracking-tight">{item.label}</span>
                                                    <div className="text-right">
                                                        <span className="text-[8px] font-mono text-gray-500 mr-1 uppercase">Ans:</span>
                                                        <span className="text-xs font-black text-red-400 ans-highlight tracking-wide">{item.answer}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                ) : (
                                    <div className="space-y-5">
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="text-[10px] text-gray-500 uppercase block mb-1">Vol. No</label>
                                                <input type="text" value={data.vol} onChange={(e) => handleChange('vol', e.target.value)} className="w-full bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm text-white outline-none focus:border-cyan-500" />
                                            </div>
                                            <div>
                                                <label className="text-[10px] text-gray-500 uppercase block mb-1">Date</label>
                                                <input type="text" value={data.date} onChange={(e) => handleChange('date', e.target.value)} className="w-full bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm text-white outline-none focus:border-cyan-500" />
                                            </div>
                                        </div>
                                        <div>
                                            <label className="text-[10px] text-gray-500 uppercase block mb-2">Theme / Genre</label>
                                            <div className="grid grid-cols-4 gap-2 bg-gray-900 rounded border border-gray-800 p-2">
                                                {Object.keys(themes).map(color => (
                                                    <button key={color} onClick={() => handleColorChange(color)} className={`h-8 rounded transition-all flex items-center justify-center ${data.themeColor === color ? 'ring-2 ring-white scale-95' : 'opacity-60 hover:opacity-100'}`} style={{ backgroundColor: themes[color].main }}>{data.themeColor === color && <div className="w-1.5 h-1.5 bg-white rounded-full shadow-sm"></div>}</button>
                                                ))}
                                            </div>
                                        </div>
                                        <div>
                                            <label className="text-[10px] text-gray-500 uppercase block mb-1 flex items-center gap-2"><Icons.Type size={14}/> Question Text</label>
                                            <textarea value={data.question} onChange={(e) => handleChange('question', e.target.value)} rows={4} className="w-full bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm text-white outline-none focus:border-cyan-500 resize-none" />
                                            <div className="flex items-center gap-3 mt-2">
                                                <input type="range" min="20" max="100" value={data.questionFontSize} onChange={(e) => handleChange('questionFontSize', e.target.value)} className="flex-1 h-1 bg-gray-800 appearance-none cursor-pointer [&::-webkit-slider-thumb]:bg-cyan-500" />
                                                <span className="text-[10px] font-mono text-cyan-500">{data.questionFontSize}px</span>
                                            </div>
                                        </div>
                                        <div>
                                            <label className="text-[10px] text-gray-500 uppercase block mb-1 flex items-center gap-2"><Icons.CheckCircle2 size={14}/> Answer Word</label>
                                            <input type="text" value={data.answer} onChange={(e) => handleChange('answer', e.target.value)} className="w-full bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm text-white outline-none focus:border-cyan-500 font-bold" />
                                            <div className="flex items-center gap-3 mt-2">
                                                <input type="range" min="40" max="150" value={data.answerFontSize} onChange={(e) => handleChange('answerFontSize', e.target.value)} className="flex-1 h-1 bg-gray-800 appearance-none cursor-pointer [&::-webkit-slider-thumb]:bg-red-500" />
                                                <span className="text-[10px] font-mono text-red-500">{data.answerFontSize}px</span>
                                            </div>
                                        </div>
                                        <hr className="border-gray-800" />
                                        <div className="space-y-3">
                                            <button onClick={handleCopyText} className={`w-full flex items-center justify-center gap-2 py-4 font-bold rounded group ${uiState.copied ? 'bg-green-600 text-white' : 'bg-gray-800 hover:bg-gray-700 text-cyan-400'}`}>{uiState.copied ? 'COPIED!' : 'COPY POST TEXT'}</button>
                                            <button onClick={() => setUiState(prev => ({ ...prev, isRecMode: true }))} className="w-full flex items-center justify-center gap-2 bg-cyan-700 hover:bg-cyan-600 py-4 font-bold rounded text-white"><Icons.ImageIcon size={18} /> FULLSCREEN (REC)</button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    <div className={`flex-1 flex justify-center items-center overflow-auto ${uiState.isRecMode ? 'fixed inset-0 bg-black z-[100]' : 'bg-[radial-gradient(#1a1a1a_1px,transparent_1px)] bg-[size:20px_20px] rounded-xl border border-gray-800'}`}>
                        {uiState.isRecMode && <button onClick={() => setUiState(prev => ({ ...prev, isRecMode: false }))} className="fixed top-4 right-4 z-[200] bg-white/10 hover:bg-white/20 p-2 rounded-full backdrop-blur-md transition-all"><Icons.X size={32}/></button>}
                        <div className="relative transition-all duration-300" style={{ transform: `scale(${uiState.zoom})`, width: '1200px', height: '675px' }}><QuizCard /></div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
