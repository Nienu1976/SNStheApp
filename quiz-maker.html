<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNStheApp Daily Quiz Generator</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (JSX変換用) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Rajdhani:wght@600;700&family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        body { background-color: #050505; color: white; margin: 0; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #0a0a0a; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #555; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- アイコンコンポーネント (Lucide Reactの代用) ---
        const Icon = ({ path, className }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="24" height="24" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {path}
            </svg>
        );

        const Icons = {
            RefreshCw: ({className}) => <Icon className={className} path={<><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></>} />,
            Palette: ({className}) => <Icon className={className} path={<><circle cx="13.5" cy="6.5" r=".5" fill="currentColor"/><circle cx="17.5" cy="10.5" r=".5" fill="currentColor"/><circle cx="8.5" cy="7.5" r=".5" fill="currentColor"/><circle cx="6.5" cy="12.5" r=".5" fill="currentColor"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.093 0-.679.522-1.218 1.218-1.218 1.482 0 2.688-1.205 2.688-2.688C16.68 5.626 14.58 2 12 2z"/></>} />,
            Type: ({className}) => <Icon className={className} path={<><polyline points="4 7 4 4 20 4 20 7"/><line x1="9" x2="15" y1="20" y2="20"/><line x1="12" x2="12" y1="4" y2="20"/></>} />,
            CheckCircle2: ({className}) => <Icon className={className} path={<><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></>} />,
            Hash: ({className}) => <Icon className={className} path={<><line x1="4" x2="20" y1="9" y2="9"/><line x1="4" x2="20" y1="15" y2="15"/><line x1="10" x2="8" y1="3" y2="21"/><line x1="16" x2="14" y1="3" y2="21"/></>} />,
            ImageIcon: ({className}) => <Icon className={className} path={<><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></>} />,
            X: ({className}) => <Icon className={className} path={<><path d="M18 6 6 18"/><path d="m6 6 12 12"/></>} />,
        };

        const App = () => {
            // --- テーマカラー定義 (ジャンル対応) ---
            const themes = {
                blue:   { label: 'ANIME & GAME', main: '#3b82f6', glow: '#60a5fa', bg: '#172554' },
                red:    { label: 'SPORTS',       main: '#ef4444', glow: '#f87171', bg: '#450a0a' },
                green:  { label: 'ENTERTAINMENT',main: '#22c55e', glow: '#4ade80', bg: '#052e16' },
                yellow: { label: 'LIFESTYLE',    main: '#eab308', glow: '#facc15', bg: '#422006' },
                orange: { label: 'SOCIAL',       main: '#f97316', glow: '#fb923c', bg: '#431407' },
                indigo: { label: 'LITERATURE',   main: '#6366f1', glow: '#818cf8', bg: '#1e1b4b' },
                purple: { label: 'SCIENCE',      main: '#a855f7', glow: '#c084fc', bg: '#3b0764' },
                white:  { label: 'NON GENRE',    main: '#94a3b8', glow: '#ffffff', bg: '#0f172a' },
            };

            const [data, setData] = useState({
                date: new Date().toLocaleDateString('ja-JP', { year: 'numeric', month: '2-digit', day: '2-digit' }),
                vol: '1',
                label: 'ANIME & GAME',
                question: 'ここに問題文を入力してください。\n適度な長さで改行すると\n読みやすくなります。',
                answer: '正解',
                difficulty: 'NORMAL',
                themeColor: 'blue',
            });

            const [uiState, setUiState] = useState({
                isRecMode: false,
                zoom: 0.8,
                copied: false,
            });

            const handleChange = (key, value) => {
                setData(prev => ({ ...prev, [key]: value }));
            };

            const handleColorChange = (colorKey) => {
                setData(prev => ({
                    ...prev,
                    themeColor: colorKey,
                    label: themes[colorKey].label
                }));
            };

            const handleCopyText = () => {
                const postText = `【今日の1問】Vol.${data.vol} [${data.date}]
ジャンル: ${themes[data.themeColor].label}
難易度: ${data.difficulty}

Q. ${data.question}

⇩ 正解は...
||${data.answer}||

#SNStheApp #競技クイズ #今日の1問`;

                const textArea = document.createElement("textarea");
                textArea.value = postText;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    setUiState(prev => ({ ...prev, copied: true }));
                    setTimeout(() => setUiState(prev => ({ ...prev, copied: false })), 2000);
                } catch (err) {
                    console.error('Copy failed', err);
                }
                document.body.removeChild(textArea);
            };

            const currentTheme = themes[data.themeColor];

            // --- クイズカードコンポーネント ---
            const QuizCard = () => {
                return (
                    <div 
                        className="relative w-[1200px] h-[675px] bg-[#020617] overflow-hidden shadow-2xl text-white font-sans flex flex-col"
                        style={{ '--main': currentTheme.main, '--glow': currentTheme.glow }}
                    >
                        <div className="absolute inset-0 bg-gradient-to-br from-black via-[#050505] to-[var(--main)] opacity-20"></div>
                        <div 
                            className="absolute inset-0 opacity-10" 
                            style={{
                                backgroundImage: `linear-gradient(var(--main) 1px, transparent 1px), linear-gradient(90deg, var(--main) 1px, transparent 1px)`,
                                backgroundSize: '40px 40px'
                            }}
                        ></div>
                        <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_0%,#000_100%)] opacity-80"></div>

                        {/* Header */}
                        <div className="relative z-10 h-24 flex justify-between items-center px-12 pt-8">
                            <div className="flex items-center gap-4">
                                <div className="bg-[var(--main)] text-black text-xl font-black px-6 py-1 skew-x-[-12deg] font-[Orbitron] shadow-[0_0_15px_var(--main)]">
                                    <span className="skew-x-[12deg] block tracking-wider">{data.label}</span>
                                </div>
                                <div className="h-[2px] w-20 bg-[var(--main)]"></div>
                                <span className="text-xl font-bold font-[Rajdhani] text-[var(--glow)] tracking-[0.2em] opacity-80">
                                    SNStheApp
                                </span>
                            </div>
                            <div className="flex flex-col items-end">
                                <span className="text-4xl font-black font-[Orbitron] text-white tracking-widest drop-shadow-md">
                                    <span className="text-2xl text-[var(--main)] mr-2">Vol.</span>
                                    {data.vol}
                                </span>
                                <span className="text-sm font-mono text-gray-400 tracking-widest mt-1">{data.date}</span>
                            </div>
                        </div>

                        {/* Content */}
                        <div className="relative z-10 flex-1 flex items-center justify-center px-24">
                            <div className="absolute inset-16 border border-[var(--main)] opacity-30 rounded-lg pointer-events-none"></div>
                            <div className="absolute inset-16 border-t-[4px] border-l-[4px] border-[var(--main)] w-8 h-8 rounded-tl-lg pointer-events-none"></div>
                            <div className="absolute inset-16 top-auto left-auto bottom-0 right-0 border-b-[4px] border-r-[4px] border-[var(--main)] w-8 h-8 rounded-br-lg pointer-events-none"></div>

                            <div className="text-left w-full">
                                <p 
                                    className="text-5xl font-bold leading-relaxed tracking-wide text-white drop-shadow-md whitespace-pre-wrap font-sans"
                                    style={{ textShadow: '0 4px 10px rgba(0,0,0,0.8)' }}
                                >
                                    {data.question}
                                </p>
                            </div>
                        </div>

                        {/* Footer */}
                        <div className="relative z-10 h-24 flex justify-between items-end px-12 pb-8">
                            <div className="flex items-center gap-6">
                                <div className="flex flex-col">
                                    <span className="text-[10px] text-gray-500 uppercase font-bold tracking-widest mb-1">DIFFICULTY</span>
                                    <div className="flex items-center gap-2">
                                        <div className={`w-3 h-3 rounded-full ${data.difficulty === 'EASY' ? 'bg-green-500' : 'bg-gray-800'}`}></div>
                                        <div className={`w-3 h-3 rounded-full ${data.difficulty === 'NORMAL' ? 'bg-blue-500' : 'bg-gray-800'}`}></div>
                                        <div className={`w-3 h-3 rounded-full ${data.difficulty === 'HARD' ? 'bg-red-500' : 'bg-gray-800'}`}></div>
                                        <span className="text-xl font-bold font-[Orbitron] text-white ml-2">{data.difficulty}</span>
                                    </div>
                                </div>
                            </div>
                            <div className="text-right opacity-50">
                                <div className="text-[10px] font-mono tracking-widest text-[var(--glow)]">
                                    TRAINING GEAR FOR QUIZ PLAYERS
                                </div>
                            </div>
                        </div>

                        {/* Effects */}
                        <div className="absolute top-0 right-0 w-[400px] h-[400px] bg-[var(--main)] blur-[150px] opacity-10 pointer-events-none"></div>
                        <div className="absolute bottom-0 left-0 w-[300px] h-[300px] bg-[var(--main)] blur-[100px] opacity-10 pointer-events-none"></div>
                    </div>
                );
            };

            return (
                <div className={`min-h-screen bg-[#050505] text-white flex p-4 gap-6 font-sans transition-all ${uiState.isRecMode ? 'justify-center items-center p-0' : 'flex-col lg:flex-row'}`}>
                    
                    {!uiState.isRecMode && (
                        <div className="w-full lg:w-[400px] bg-[#111] border-r-2 border-cyan-900/30 flex flex-col h-fit lg:h-[calc(100vh-2rem)] sticky top-4 rounded-xl overflow-hidden shadow-2xl">
                            <div className="p-5 bg-[#0a0a0a] border-b border-gray-800">
                                <h1 className="text-xl font-black italic tracking-tighter font-[Orbitron] text-cyan-400 flex items-center gap-2">
                                    <Icons.RefreshCw className="w-5 h-5" /> DAILY GEN
                                </h1>
                                <p className="text-[10px] text-gray-500 font-mono tracking-widest mt-1">X POST MAKER v1.1</p>
                            </div>

                            <div className="p-5 space-y-6 overflow-y-auto flex-1 custom-scrollbar">
                                <div className="space-y-4">
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="text-[10px] text-gray-500 uppercase block mb-1">Vol. No</label>
                                            <input type="text" value={data.vol} onChange={(e) => handleChange('vol', e.target.value)} className="w-full bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm font-mono text-white focus:border-cyan-500 outline-none transition-colors" />
                                        </div>
                                        <div>
                                            <label className="text-[10px] text-gray-500 uppercase block mb-1">Date</label>
                                            <input type="text" value={data.date} onChange={(e) => handleChange('date', e.target.value)} className="w-full bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm font-mono text-white focus:border-cyan-500 outline-none transition-colors" />
                                        </div>
                                    </div>

                                    <div>
                                        <label className="text-[10px] text-gray-500 uppercase block mb-2 flex items-center gap-2">
                                            <Icons.Palette className="w-3 h-3"/> Genre / Theme Color
                                        </label>
                                        <div className="grid grid-cols-4 gap-2 bg-gray-900 rounded border border-gray-700 p-2">
                                            {Object.keys(themes).map(color => (
                                                <button 
                                                    key={color}
                                                    onClick={() => handleColorChange(color)}
                                                    className={`h-8 rounded transition-all flex items-center justify-center relative group ${data.themeColor === color ? 'ring-2 ring-white scale-95' : 'hover:scale-105'}`}
                                                    style={{ backgroundColor: themes[color].main }}
                                                    title={themes[color].label}
                                                >
                                                    {data.themeColor === color && <div className="w-1.5 h-1.5 bg-white rounded-full shadow-sm"></div>}
                                                </button>
                                            ))}
                                        </div>
                                        <div className="text-right mt-1">
                                            <span className="text-[10px] font-mono text-cyan-400">{themes[data.themeColor].label}</span>
                                        </div>
                                    </div>

                                    <div>
                                        <label className="text-[10px] text-gray-500 uppercase block mb-1">Genre Label (Editable)</label>
                                        <input 
                                            type="text" 
                                            value={data.label} 
                                            onChange={(e) => handleChange('label', e.target.value)} 
                                            className="w-full bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm font-[Orbitron] text-white focus:border-cyan-500 outline-none transition-colors tracking-wider"
                                        />
                                    </div>

                                    <div>
                                        <label className="text-[10px] text-gray-500 uppercase block mb-1 flex items-center gap-2"><Icons.Type className="w-3 h-3"/> Question Text</label>
                                        <textarea 
                                            value={data.question} 
                                            onChange={(e) => handleChange('question', e.target.value)} 
                                            rows={4}
                                            className="w-full bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm text-white focus:border-cyan-500 outline-none transition-colors resize-none leading-relaxed"
                                        />
                                    </div>

                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="text-[10px] text-gray-500 uppercase block mb-1">Difficulty</label>
                                            <select value={data.difficulty} onChange={(e) => handleChange('difficulty', e.target.value)} className="w-full bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm text-white focus:border-cyan-500 outline-none cursor-pointer">
                                                <option value="EASY">EASY</option>
                                                <option value="NORMAL">NORMAL</option>
                                                <option value="HARD">HARD</option>
                                                <option value="EXPERT">EXPERT</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div>
                                        <label className="text-[10px] text-gray-500 uppercase block mb-1 flex items-center gap-2"><Icons.CheckCircle2 className="w-3 h-3"/> Correct Answer</label>
                                        <input 
                                            type="text" 
                                            value={data.answer} 
                                            onChange={(e) => handleChange('answer', e.target.value)} 
                                            className="w-full bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm text-white focus:border-cyan-500 outline-none transition-colors"
                                            placeholder="正解を入力（投稿用テキストに使用）"
                                        />
                                    </div>
                                </div>

                                <hr className="border-gray-800" />

                                <div className="space-y-3">
                                    <button 
                                        onClick={handleCopyText}
                                        className={`w-full flex items-center justify-center gap-2 py-4 font-bold tracking-widest transition-all shadow-lg rounded group ${uiState.copied ? 'bg-green-600 text-white' : 'bg-gray-800 hover:bg-gray-700 text-cyan-400'}`}
                                    >
                                        {uiState.copied ? <Icons.CheckCircle2 className="w-5 h-5" /> : <Icons.Hash className="w-5 h-5" />}
                                        {uiState.copied ? 'COPIED!' : 'COPY POST TEXT'}
                                    </button>
                                    
                                    <button 
                                        onClick={() => setUiState(prev => ({ ...prev, isRecMode: true }))}
                                        className="w-full flex items-center justify-center gap-2 bg-cyan-700 hover:bg-cyan-600 py-4 font-bold tracking-widest transition-colors shadow-lg rounded text-white"
                                    >
                                        <Icons.ImageIcon className="w-5 h-5" /> FULLSCREEN (REC)
                                    </button>
                                </div>

                                <div className="pt-4">
                                    <label className="text-[10px] text-gray-500 uppercase block mb-1">Preview Zoom</label>
                                    <input type="range" min="0.3" max="1.2" step="0.1" value={uiState.zoom} onChange={(e) => setUiState(prev => ({ ...prev, zoom: parseFloat(e.target.value) }))} className="w-full h-1 bg-gray-800 appearance-none cursor-pointer [&::-webkit-slider-thumb]:bg-cyan-500" />
                                </div>
                            </div>
                        </div>
                    )}

                    <div className={`flex-1 flex justify-center items-center overflow-auto ${uiState.isRecMode ? 'fixed inset-0 bg-black z-[100]' : 'bg-[radial-gradient(#1a1a1a_1px,transparent_1px)] bg-[size:20px_20px] rounded-xl border border-gray-800 min-h-[500px]'}`}>
                        
                        {uiState.isRecMode && (
                            <button 
                                onClick={() => setUiState(prev => ({ ...prev, isRecMode: false }))}
                                className="fixed top-4 right-4 z-[200] bg-white/10 hover:bg-white/20 p-2 rounded-full backdrop-blur-md transition-all group"
                            >
                                <Icons.X className="w-8 h-8 text-white group-hover:scale-110" />
                            </button>
                        )}

                        <div 
                            className="relative transition-all duration-300 shadow-[0_0_100px_rgba(0,0,0,0.8)]"
                            style={{ 
                                transform: `scale(${uiState.zoom})`,
                                width: '1200px',
                                height: '675px'
                            }}
                        >
                            <QuizCard />
                            
                            {!uiState.isRecMode && (
                                <div className="absolute -bottom-10 left-0 w-full text-center">
                                    <span className="font-mono text-[10px] text-gray-500 border border-gray-700 px-2 py-1 rounded bg-black">1200px × 675px (16:9)</span>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
